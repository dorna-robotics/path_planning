
import numpy as np
import os 
import time
import path_planning
from path_planning import Planner

# Define a shape dict (box example)
scene = []
load = []


col_boxes = [{'pose': [0.0, 0.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [0.0, -250.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [500.0, 0.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [500.0, -250.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [0.0, 250.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [500.0, 250.0, 3.5, 0.0, 0.0, 0.0], 'scale': [500.0, 250.0, 7.0]}, {'pose': [712.5, 12.5, 10.24, 0.0, 0.0, 90.0], 'scale': [66.0, 66.0, 5.95]}, {'pose': [712.5, 12.5, 84.82, 0.0, 0.0, 90.0], 'scale': [27.0, 27.0, 152.51]}, {'pose': [688.93, 12.500000000000002, 159.0, 0.0, 0.0, 90.0], 'scale': [53.92, 75.07, 5.95]}, {'pose': [437.5, -262.5, 11.182, 0.0, 0.0, 90.0], 'scale': [151.18, 101.12, 9.2]}, {'pose': [437.5, -262.5, 24.4, 0.0, 0.0, 90.0], 'scale': [131.0, 87.4, 28.28]}, {'pose': [402.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [402.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [416.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [430.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [444.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [458.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -311.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -297.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -283.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -269.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -255.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -241.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -227.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [472.5, -213.5, 32.713, 0.0, 0.0, 135.0], 'scale': [11.9, 11.9, 35.73]}, {'pose': [287.5, -262.5, 11.182, 0.0, 0.0, 90.0], 'scale': [151.18, 101.12, 9.2]}]

for box in col_boxes:
    scene.append(Planner.create_cube( box["pose"],[box["scale"][0]*2,box["scale"][1]*2,box["scale"][2]*2] ))



planner = Planner(    
    scene = scene,
    load          = [],
    tool          = [0,0,10, 0,0,0],
    gripper        = [],
    base_in_world = [280,0,30.0, 0,0,0],
    frame_in_world= [0.0,0.0,0.0, 0,0,0],
    aux_dir       = [ [1,0,0], [0,0,0] ]
    )



start_time = time.perf_counter()
res = (planner.plan([-32,-20,0,0,0,0],[32,-20,0,0,0,0]))

end_time = time.perf_counter()
execution_time = end_time - start_time

print(f"Operation finished in {execution_time:.4f} seconds")

print(res)

res = planner.check_collision([0,0,0,0,0,0])#(planner.plan([0,-180,0,0,0,0],[0,0,0,0,0,0]))



print(res)